{"config":{"lang":["it"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"VisiData: il coltellino svizzero per i dati, che probabilmente non conosci","text":"<p>VisiData \u00e8 un fantastico strumento open source per esplorare e manipolare dati. Mette insieme la chiarezza di un foglio di calcolo, con l'efficienza del terminale e la potenza di Python, in una utility leggera in grado di gestire milioni di righe con facilit\u00e0.</p> <p>La presentazione ufficiale fa un'ottima sintesi, ma non evidenzia la cosa che colpisce pi\u00f9:  quella di Saul Pwanson (il creatore di VisiData) \u00e8 prima di ogni altra cosa una grande idea. Lo si capisce usandolo e speriamo che emerga anche leggendo questa guida.</p> <p>Per usarlo non \u00e8 necessario essere uno sviluppatore; se si conosce un po' <code>Python</code>, sar\u00e0 possibile usarlo in modo ancora pi\u00f9 sorprendente.</p>"},{"location":"#perche-usarlo","title":"Perch\u00e9 usarlo","text":"<ul> <li>\u00c8 rapido, apre quasi istantaneamente file di diverse decine di megabyte;</li> <li>\u00e8 agile, rende semplice la ricerca, il filtraggio, l'ordinamento,il join e la ristrutturazione  di dati tabellari;</li> <li>consente di avere in pochi passaggi una visione di insieme dei dataset su cui si vuole lavorare;</li> <li>apre molti dei formati tipici di testo strutturato (csv, tsv,  xlsx , xls, json, xml, sqlite, shp, html, hdf5, xpt, sas7bdat, sav, dta)</li> <li>si utilizza soltanto da tastiera, ed \u00e8 possibile dimenticarsi del mouse;</li> <li>\u00e8 free ed open source.</li> </ul> <p>Sorprende la sua rapidit\u00e0 e come offra in modo agile una visione di insieme dei dati. Questo, affiancato all'utilizzo da tastiera, lo rende un prodotto che d\u00e0 una marcia in pi\u00f9 a chi lo usa.</p> <p>Leggi la guida  Condividi </p>"},{"location":"aiuto/","title":"Aiuto","text":""},{"location":"aiuto/#dove-chiedere-aiuto","title":"Dove chiedere aiuto","text":"<p>Due i luoghi principali dove chiedere aiuto, segnalare bug, e fare proposte su VisiData:</p> <ul> <li>la pagina ufficiale delle issue;</li> <li>la pagina ufficiale delle discussioni.</li> </ul> <p>\u00c8 bene farlo scrivendo sempre la versione di VisiData utilizzata, allegando i dati per replicare eventuali problemi riscontrati, documentando la procedura che si vuole realizzare.</p> <p> Se invece vuoi fare qualche domanda, o proposta, su questa guida, usa per favore le discussioni.</p>"},{"location":"aiuto/#url-consigliati","title":"URL consigliati","text":"<ul> <li>la guida di Jeremy Singer Vine https://jsvine.github.io/intro-to-visidata/</li> <li>le ricette sul sito ufficiale http://visidata.org/docs/;</li> <li>la documentazione ufficiale http://visidata.org/man/;</li> <li>la playlist YouTube a cura dell'autore https://www.youtube.com/playlist?list=PLxu7QdBkC7drrAGfYzatPGVHIpv4Et46W.</li> </ul>"},{"location":"cheatsheet/","title":"Cheat-sheet","text":"<p>Abbiamo tradotto in italiano il cheat-sheet di VisiData, creato da Jeremy Singer Vine, disponibile in HTML e PDF.</p> <p></p>"},{"location":"cheatsheet/#la-versione-fronte-retro-a-cura-di-gianni-vitrano","title":"La versione fronte retro a cura di Gianni Vitrano","text":"<p>Gianni Vitrano di OpenDataSicilia a partire da questo cheat-sheet, ha creato la versione da stampare fronte retro a \"libretto\". Grazie Gianni!</p>"},{"location":"comandi/","title":"Comandi","text":""},{"location":"comandi/#altri-comandi","title":"Altri comandi","text":"<p><code>CTRL+E</code>: Visualizza il traceback per l'errore pi\u00f9 recente</p> <p><code>gCTRL+E</code>: Visualizza il traceback per gli errori pi\u00f9 recenti</p> <p><code>zCTRL+E</code>: Visualizza il trackback per l'errore nella cella corrente</p>"},{"location":"configurazione/","title":"Configurazione","text":"<p>In VisiData \u00e8 possibile utilizzare un file di configurazione, per personalizzare alcune caratteristiche: i colori dell'applicazione, le funzioni disponibili, l'interfaccia, ecc..</p> <p>Questo file di default si chiama <code>.visidatarc</code> e VisiData lo cerca nella cartella home dell'utente, quindi <code>~/.visidatarc</code>. Se non \u00e8 presente, \u00e8 da creare e da riempire con le istruzioni di configurazione che si desiderano.</p>"},{"location":"configurazione/#esempi","title":"Esempi.","text":""},{"location":"configurazione/#attivare-contatore-di-righe-e-colonne","title":"Attivare contatore di righe e colonne","text":"<p>\u00c8 molto comodo, ma non \u00e8 disponibile by default, poter aver nell'interfaccia di VisiData un'indicazione con (vedi figura sotto):</p> <ol> <li>riga corrente;</li> <li>righe totali;</li> <li>numero di righe selezionate;</li> <li>colonna corrente;</li> <li>colonne totali.</li> </ol> <p></p> <p>Per attivare la cosa bisogna aprire il file di configurazione di VisiData e aggiungere il seguente codice:</p> <pre><code>@Sheet.property\ndef cursorRowIndex1(sheet):\n    return sheet.cursorRowIndex+1\n@Sheet.property\ndef cursorVisibleColIndex1(sheet):\n    return sheet.cursorVisibleColIndex+1\n\nSheet.class_options.disp_rstatus_fmt = ' R:{sheet.cursorRowIndex1}/{sheet.nRows}[{sheet.nSelectedRows}] C:{sheet.cursorVisibleColIndex1}/{sheet.nVisibleCols} {sheet.rowtype} '\n</code></pre>"},{"location":"configurazione/#modificare-i-colori-lesempio-della-barra-di-stato","title":"Modificare i colori: l'esempio della barra di stato","text":"<p>Questi i passi da seguire:</p> <ul> <li>aprire in modifica il file di configurazione;</li> <li>aggiungere l'opzione relativa che si vuole cambiare, con questa sintassi <code>options.color_status = 'bold black on 255'</code>;</li> <li>salvare il file di configurazione.</li> </ul>"},{"location":"configurazione/#attivare-il-comando-clean-names","title":"Attivare il comando <code>clean-names</code>","text":"<p>I nomi dei campi dei file, per essere utilizzati in VisiData all'interno di espressioni Python non devono contenere spazi.</p> <p>Per avere disponibile un comando per \"pulire\" e normalizzare questi nomi, si pu\u00f2 aggiungere questo codice al file di configurazione:</p> <pre><code>Sheet.addCommand('', 'clean-names', '''\noptions.clean_names = True;\nfor c in visibleCols:\n    c.name = c.name\n''')\n</code></pre> <p>Una volta aggiunto, per usarlo in VisiData:</p> <ul> <li>fare click sulla barra spaziatrice ;</li> <li>digitare <code>clean-names</code> e premere INVIO .</li> </ul>"},{"location":"configurazione/#importare-un-modulo-python","title":"Importare un modulo Python","text":"<p>\u00c8 possibile importare in VisiData uno o pi\u00f9 moduli Python, in modo che sia disponibili ulteriori funzionalit\u00e0. Per farlo c'\u00e8 da aggiungere nel file di configurazione la \"classica\" stringa di import.</p> <p>Ad esempio per abilitare il modulo <code>re</code> (quello sulle espressioni regolari), baster\u00e0 aggiungere:</p> <pre><code>import re\n</code></pre> <p>E con questo modulo attivato, si potranno applicare  filtri, basati su espressioni regolari.</p>"},{"location":"configurazione/#aggiungere-separatore-delle-migliaia","title":"Aggiungere separatore delle migliaia","text":"<p>Quando si apre una tabella in formato <code>CSV</code>, tutte le colonne vengono interpretate come testo. L'utente potr\u00e0 poi definire quelle numeriche come colonna con numeri interi o decimali. Ma i separatori delle migliaia di default non sono presenti e non \u00e8 facile quindi capire sempre se siamo ad esempio nell'ordine dei milioni o miliardi.</p> <p>Allora \u00e8 comodo modificare il file <code>~/.visidatarc</code> e aggiungere questi parametri:</p> <pre><code># impostazione per i campi float\noptions.disp_float_fmt = '{:,.02f}'\n# impostazione per i campi interi\noptions.disp_int_fmt = '{:,}'\n</code></pre> <p>In questo modo <code>10537428.32</code> sar\u00e0 visualizzato come <code>10,537,428.32</code> e <code>1530142</code> come <code>1,530,142</code>.</p>"},{"location":"configurazione/#un-file-di-configurazione-di-esempio","title":"Un file di configurazione di esempio","text":"<pre><code># Python modules to import\n\nimport re\n\n# to set the value to use for null value cells\noptions.null_value = \"\"\n#options.disp_float_fmt = '%.07f'\n\n# to have rows and columns info bottom right\n@Sheet.property\ndef cursorRowIndex1(sheet):\n    return sheet.cursorRowIndex+1\n@Sheet.property\ndef cursorVisibleColIndex1(sheet):\n    return sheet.cursorVisibleColIndex+1\n\nSheet.class_options.disp_rstatus_fmt = ' R:{sheet.cursorRowIndex1}/{sheet.nRows}[{sheet.nSelectedRows}] C:{sheet.cursorVisibleColIndex1}/{sheet.nVisibleCols} {sheet.rowtype} '\n\n# to have the function that write today date\ntoday = datetime.datetime.today()\n\n# to set the color of the status bar\noptions.color_status = 'bold black on 255'\n\n# to add a command to clean field names, not usable in python expressions\nSheet.addCommand('', 'clean-names', '''\noptions.clean_names = True;\nfor c in visibleCols:\n    c.name = c.name\n''')\n\n# add a function to apply natural sorting to cell values\n# https://github.com/ondata/guidaVisiData/discussions/51\n\n_nsre = re.compile('([0-9]+)')\ndef natural_sort_key(s):\n    return [int(text) if text.isdigit() else text.lower()\n        for text in re.split(_nsre, s)]\n\ndef natsort(value, delimiter=','):\n    list1 = value.split(delimiter)\n</code></pre>"},{"location":"dieciModi/","title":"10 Modi di usare Visidata","text":"<p>Dieci esempi rapidi, che mostrano cosa \u00e8 possibile fare con VisiData. \u00c8 una sezione a cura di Salvatore Fiandaca (grazie), basata sul lavoro di Saul Pwanson, l'autore di VisiData.</p>"},{"location":"dieciModi/#1-esplora-i-set-di-dati-senza-sforzo-indipendentemente-dal-formato","title":"1. esplora i set di dati senza sforzo, indipendentemente dal formato","text":"<pre><code>$ vd albums.json dropbox/*.xls* agents.sqlite\n</code></pre> <p>Utilizzare i tasti freccia (\u2191\u2193\u2192\u2190) per spostarsi e <code>q</code> per uscire.</p> <p>VisiData carica i dati da molte fonti e formati diversi, incluso tutto ci\u00f2 che i pandas possono caricare!</p> <p>I nuovi caricatori sono inclusi in ogni versione e puoi crearne uno tu stesso facilmente.</p>"},{"location":"dieciModi/#2-convertire-da-qualsiasi-formato-di-input-in-qualsiasi-formato-di-output","title":"2. convertire da qualsiasi formato di input in qualsiasi formato di output","text":"<p>All'interno di VisiData, premere CTRL+S per salvare il file nel formato specificato dall'estensione.</p> <p>Converti direttamente dalla riga di comando con:</p> <pre><code>$ vd -b input.csv -o output.json\n</code></pre>"},{"location":"dieciModi/#3-come-sostituto-interattivo-di-grep-awk-sed-cut-sort-uniq","title":"3. come sostituto interattivo di grep, awk, sed, cut, sort, uniq","text":"<pre><code>$ netstat -an | vd -f fixed -o used-ports.txt\n</code></pre> <p>Premi CTRL+Q per uscire da VisiData e salvare nel file di output specificato.</p>"},{"location":"dieciModi/#4-grattare-i-dati-della-tabella-html-da-una-pagina-web","title":"4. grattare i dati della tabella HTML da una pagina Web:","text":"<pre><code>$ vd https://en.wikipedia.org/wiki/List_of_largest_cities\n</code></pre>"},{"location":"dieciModi/#5-vedere-una-differenza-visiva-di-due-fogli-con-la-stessa-struttura","title":"5. vedere una differenza visiva di due fogli con la stessa struttura","text":"<pre><code>$ vd --diff foo1.csv foo2.csv\n</code></pre>"},{"location":"dieciModi/#6-esplora-un-oggetto-dal-python-repl","title":"6. esplora un oggetto dal Python REPL","text":"<pre><code>&gt;&gt;&gt; visidata.view(obj)\n</code></pre>"},{"location":"dieciModi/#7-esplora-tutti-i-pandas-dataframe","title":"7. esplora tutti i pandas DataFrame","text":"<pre><code>&gt;&gt;&gt; visidata.view_pandas(df)\n</code></pre>"},{"location":"dieciModi/#8-creare-una-pipeline-di-dati-ad-hoc","title":"8. creare una pipeline di dati ad hoc","text":"<p>VisiData pu\u00f2 anche essere utilizzato in modalit\u00e0 batch con script senza richiedere alcuna interazione.</p> <p>Salvare il cmdlog in un file .vd con <code>CTRL+D foo.vd</code>, quindi riprodurre il file .vd salvato:</p> <pre><code>$ vd -b -p foo.vd\n</code></pre>"},{"location":"dieciModi/#9-rinominare-un-mucchio-di-file","title":"9. rinominare un mucchio di file","text":"<p>Avviare vd nella directory con i file Modifica i nomi dei file (documentazione sui comandi di modifica) CTRL+S per eseguire il commit (guarda questo video che mostra come utilizzare il browser di directory)</p>"},{"location":"dieciModi/#10-vedi-tutte-le-opzioni-e-i-comandi-disponibili","title":"10. vedi tutte le opzioni e i comandi disponibili","text":"<p>Esistono molti altri modi per utilizzare VisiData! Per saperne di pi\u00f9, premi CTRL+H per vedere la manpage o z CTRL+H per vedere l'elenco completo dei comandi disponibili sul foglio corrente.</p>"},{"location":"fogli/","title":"Fogli","text":""},{"location":"fogli/#introduzione","title":"Introduzione","text":"<p>In VisiData ci sono tre tipi di fogli:</p> <ul> <li>i fogli sorgente, con i dati che si \u00e8 scelto di aprire con VisiData;</li> <li>i fogli derivati, come quelli derivanti da filtraggio o la tabelle con le frequenze (vedi sotto);</li> <li>i metafogli, che descrivono e definiscono i dataset caricati (come quello che descrive ad esempio le colonne di una tabella, o il \"foglio dei fogli\").</li> </ul> <p>Il foglio/tabella correntemente aperto si chiude con <code>q</code>.</p>"},{"location":"fogli/#fare-join-tra-tabelle","title":"Fare JOIN tra tabelle","text":"<p>Se ad esempio si volesse calcolare il rapporto tra numero di mezzi e popolazione, sarebbe utile fare un JOIN con una tabella con i dati della popolazione residente.</p> <p>I dati per provincia sono quelli di sotto e sono stati salvati in un file TSV denominato <code>popolazioneAbruzzo.tsv</code> (fonte ISTAT).</p> Provincia Popolazione L'AQUILA 300404 TERAMO 308284 PESCARA 319388 CHIETI 387120 <p>Si pu\u00f2 fare in questo modo:</p> <ul> <li>si parte da <code>vd parco_circolante_Abruzzo.csv</code>;</li> <li>si va sulla colonna <code>provincia_residenza</code>;</li> <li>si calcola il foglio delle frequenze pigiando <code>Shift+f</code> e si ottiene</li> </ul> <p></p> <ul> <li>si rinomina questo foglio frequenze premendo la barra spaziatrice, scrivendo il comando <code>rename-sheet</code> e dando poi <code>Invio</code>. E poi inserendo il nome nuovo (ad esempio <code>mezziProvincia</code>);</li> <li>si apre la tabella con i dati sulla popolazione per provincia, pigiando <code>o</code>, scrivendo <code>popolazioneAbruzzo.tsv</code> (che \u00e8 il nome del file) e pigiando <code>Invio</code> (NOTA BENE si pu\u00f2 scrivere anche soltanto <code>popo</code> e poi pigiare <code>TAB</code> e il nome del file verr\u00e0 autocompletato). Si otterr\u00e0</li> </ul> <p></p> <ul> <li>si va nella colonna <code>Provincia</code> e si preme <code>!</code> per impostarla come colonna chiave. Il JOIN in VisiData viene fatto tra colonne chiave;</li> <li>si apre il \"foglio dei fogli\" con <code>Shift+s</code> e si visualizzer\u00e0 qualcosa come;</li> </ul> <p></p> <ul> <li>si va nella riga che contiene lo sheet <code>popolazioneAbruzzo</code> e si pigia INVIO;</li> <li>si va di nuovo nella colonna <code>Provincia</code> e si preme <code>!</code> per impostarla come colonna chiave;</li> <li>si apre il \"foglio dei fogli\" con <code>Shift+s</code>;</li> <li>si selezionano con <code>s</code> le due tabelle <code>mezziProvincia</code> e <code>popolazioneAbruzzo</code>;</li> <li>si pigia <code>&amp;</code> che \u00e8 il comando di JOIN e in basso a sinistra ci viene chiesto quale tipo si vuole applicare (nota bene: con VisiData &gt;2.0 si deve premere <code>CTRL + x</code> e scegliere il tipo di <code>JOIN</code>);</li> </ul> <p></p> <ul> <li>si scrive <code>inner</code> e si pigia <code>Invio</code> e si ottiene una tabella che contiene sia il numero di mezzi per provincia, che il numero di abitanti.</li> </ul> <p></p> <p>Da questa tabella a questo punto, semplificando un po', si potrebbe rapidamente calcolare il numero macchine per persona, in questo modo:</p> <ul> <li>si va nella colonna <code>Popolazione</code> e si preme <code>#</code> per impostarla come numero intero;</li> <li>si pigia <code>=</code> (per creare una nuova colonna con valori frutto di un'espressione);</li> <li>si scrive poi nel prompt <code>count/Popolazione</code> (c'\u00e8 l'autocompletamento con <code>TAB</code> dei nomi delle colonne);</li> <li>e si ottiene un risultato come quello di sotto.</li> </ul> <p></p>"},{"location":"fogli/#concatenare-tabelle-in-verticale","title":"Concatenare tabelle in verticale","text":"<p>La concatenazione in \"verticale\" tra due o pi\u00f9 tabelle con la stessa struttura si attiva tramite <code>&amp;</code>. Ad esempio, a partire dai due file <code>inputFileOne.csv</code> e <code>inputFileTwo.csv</code>, presenti qui si procede in questo modo:</p> <ul> <li>si apre la shell e si va nella cartella che contiene i file da concatenare;</li> <li>si scrive <code>vd</code> e si preme <code>INVIO</code>;</li> <li>si selezionano con <code>s</code> i due file;</li> <li>si preme <code>g INVIO</code> per aprirli entrambi;</li> <li>si apre il foglio dei fogli con <code>SHIFT+S</code>;</li> <li>si selezionano  <code>inputFileOne.csv</code> e <code>inputFileTwo.csv</code> con <code>s</code>;</li> <li>si preme <code>&amp;</code> per attivare la concatenazione;</li> <li>si preme <code>CTRL+X</code> per il menu;</li> <li>si seleziona <code>append</code> e poi si preme <code>INVIO</code>.</li> </ul> <p>Si avr\u00e0 a video l'unione dei due file di input (in questo video una replica di quanto descritto, per versioni <code>vd &lt; 2</code>).</p>"},{"location":"fogli/#tabelle-pivot","title":"Tabelle Pivot","text":"<p>Ecco ad esempio come creare quella che da conto del numero di mezzi per marca, suddivisi per provincia:</p> <ul> <li>si va nella colonna <code>marca</code> e si imposta come colonna chiave, premendo <code>!</code>;</li> <li>si va poi nella colonna <code>provincia_residenza</code> e si pigia <code>SHIFT+W</code>;</li> <li>si ottiene la tabella pivot desiderata.</li> </ul> <p></p> <p>Se invece del conteggio delle occorrenze si volesse (a partire da un altro campo) calcolare un altro dato aggregato  - come ad esempio l'et\u00e0 media per marca e provincia - si pu\u00f2 procedere in questo modo:</p> <ul> <li>si va nella colonna <code>eta_intestatario</code> e si imposta a numero intero, pigiando su <code>#</code>;</li> <li>si preme <code>+</code>, poi in basso a sinistra nel prompt si scrive <code>avg</code> e infine si d\u00e0 <code>INVIO</code>; si va di nuovo nella colonna <code>provincia_residenza</code> e si pigia <code>SHIFT+W</code>.</li> </ul> <p>In output, per ogni provincia, si avr\u00e0 quindi la media desiderata.</p> <p></p>"},{"location":"fogli/#metafogli","title":"Metafogli","text":""},{"location":"fogli/#foglio-di-riepilogo-globale","title":"Foglio di riepilogo globale","text":"<p>Per avere una visione a \"volo d'uccello\" sull'intera tabella esiste il comando <code>Shift+i</code>, che restituisce un riepilogo statistico per tutte le colonne. Se prima di lanciarlo si definiscono correttamente i campi (ad esempio i numerici, come numerici), verranno eseguiti correttamente anche i calcoli per <code>min</code>, <code>max</code>, <code>median</code>, <code>mean</code>, <code>stdev</code>.</p> <p></p> <p>Questa \u00e8 un'altra feature di grande comodit\u00e0 (presente in molte applicazione e ambienti per analisi dati), che verr\u00e0 usata molto da chi lavorer\u00e0 con VisiData.</p>"},{"location":"fogli/#foglio-dei-fogli","title":"Foglio dei fogli","text":"<p>Il \"foglio dei fogli\" si apre con <code>Shift + s</code> e fornisce l'elenco (e alcune informazioni correlate) di tutti i fogli aperti. Selezionandone uno e pigiando <code>Invio</code>, quest'ultimo si aprir\u00e0.</p> <p></p> <p>Per rinominarne uno dal \"foglio dei fogli\", basta selezionarlo, premere <code>e</code> e inserire il nuovo nome e poi dare <code>Invio</code>. O in alternativa, se si \u00e8 davanti al foglio che si vuole rinominare, premere la <code>barra spaziatrice</code>, scrivere <code>rename-sheet</code>, digitare il nuovo nome e infine pigiare su <code>Invio</code>.</p>"},{"location":"fogli/#fogli-derivati","title":"Fogli derivati","text":""},{"location":"fogli/#foglio-delle-frequenze","title":"Foglio delle frequenze","text":"<p>Uno dei modi per avere un riepilogo \u00e8 usare il foglio delle frequenze. A partire da una colonna (o dalla combinazione di pi\u00f9 d'una) \u00e8 possibile - con <code>Shift+f</code> - aprire un foglio derivato, che contiene dei dati relativi al conteggio per valori distinti di quanto contenuto in quella colonna.</p> <p>Se per esempio a partire dal Parco Circolante dei veicoli dell'Abruzzo, si volesse avere un'idea sulla distribuzione per \"marca\", basta navigare in vista tabella sino a quella colonna e poi pigiare <code>Shift+f</code> e avere qualcosa come quella di sotto.</p> <p></p> <p>I dati sono ordinati per conteggio ed emerge subito come una famosa marca nazionale da sola faccia \u00bc del campione. Cos\u00ec come emerge che c'\u00e8 un 5% di elementi in cui la marca non \u00e8 definita e anche questa \u00e8 un'informazione che ci potrebbe consentire da subito di prendere delle decisioni. Molto comoda anche la colonna <code>histogram</code> che da visivamente in modo molto diretto un'idea del rapporto tra i numeri descritti in tabella.</p> <p>\u00c8 possibile generare un foglio delle frequenze anche basato su pi\u00f9 colonne. Per farlo si impostano come colonne chiave (qui come fare) quelle che si vogliono trasformare in \"foglio delle frequenze\", e poi si pigia <code>g+Shift+f</code>. Qui sotto ad esempio un riepilogo per le coppie univoche di <code>destinazione/alimentazione</code>.</p> <p>I fogli di frequenza, oltre al conteggio per valori distinti, possono contenere altri calcoli. Gli \"aggregatori\" possibili sono <code>min</code>, <code>max</code>, <code>avg / mean</code>, <code>median</code>, <code>q3/q4/q5/q10</code> (terzili/quartili/quintili/decili), <code>sum</code>, <code>distinct</code>, <code>count</code> e <code>keymax</code>.</p> <p>Ad esempio per ogni provincia si pu\u00f2 avere restituito la distribuzione di et\u00e0 per quartile e scoprire che il 50% del campione \u00e8 compreso nella fascia di et\u00e0 tra i 18 e circa i 55 anni.</p> <p></p> <p>Per aggiungere l'aggregatore <code>q4</code> al foglio delle frequenze, bisogna seguire questi passi:</p> <ul> <li>navigare sino alla colonna <code>eta_intestatario</code> e impostarla a numero intero con <code>#</code>;</li> <li>premere <code>+</code> e scrivere (in basso a sinistra) <code>q4</code> (per il calcolo dei quartili, quindi al 25, 50 e 75 percento);</li> <li>navigare sino alla colonna <code>provincia_residenza</code> e pigiare <code>Shift+f</code>.</li> </ul> <p>Inizier\u00e0 da subito il calcolo (che non \u00e8 immediato, sono pi\u00f9 di un milione di righe) e alla fine si avr\u00e0 qualcosa come l'immagine di sopra (non \u00e8 fico VisiData?).</p> <p></p>"},{"location":"fogli/#salvare-un-foglio","title":"Salvare un foglio","text":"<p>Per salvare un foglio si preme <code>CTRL+s</code>, poi si scrive il nome del file con estensione (<code>nomeEsempio.csv</code>) e infine si pigia <code>Invio</code>.</p>"},{"location":"formati/","title":"Formati","text":"filetype format VisiData_loader VisiData saver version_added created creator PyPI dependencies csv Comma-Separated Values 0.28 displayed text 0.28 1972 json Javascript Object Notation (JSON) 0.28 typed 0.28 2001 Douglas Crockford tsv Tab-Separated Values 0.28 displayed text 0.28 xlsx Excel spreadsheets 0.28 0.28 1987 Microsoft openpyxl zip ZIP archive format 0.28 0.28 1989 PKWARE hdf5 Hierarchical Data Format 0.28 0.28 199x NCSA h5py sqlite sqlite 0.42 0.42 2000 D. Richard Hipp xls Excel spreadsheets 0.42 0.42 1987 Microsoft xlrd fixed fixed width text 0.97 0.97 postgres PostgreSQL database 0.97 0.97 1996 vd VisiData command log 0.97 0.97 2017 VisiData vds VisiData Sheet 2.2 yes 2021 VisiData mbtiles MapBox Tileset 0.98 0.98 2011 MapBox mapbox-vector-tile pbf Protocolbuffer Binary Format 0.98 0.98 2011 OpenStreetMap shp Shapefile geographic data 0.98 0.98 1993 ESRI pyshp html HTML tables 0.99 displayed text 0.99 1996 Dave Raggett lxml md markdown table displayed text 1.1 2008 png Portable Network Graphics (PNG) image 1.1 from png 1.1 1996 PNG Development Group pypng ttf TrueType Font 1.1 1.1 1991 Apple fonttools dot Graphviz diagram from pcap 1.2 1991 dta Stata 1.2 1.2 1985 StataCorp pandas geojson Geographic JSON 2.2 yes (from shp and geojson) 2008 http://geojson.org/ sas7bdat Statistical Analysis System (SAS) 1.2 1.2 1976 SAS Institute sas7bdat sav SPSS statistics 1.2 1.2 1968 SPSS Inc spss SPSS statistics 1.2 1.2 1968 SPSS Inc savReaderWriter xpt Statistical Analysis System (SAS) 1.2 1.2 1976 SAS Institute xport jsonl JSON Lines 1.3 typed 1.3 2013 Ian Ward pandas all formats supported by pandas library 1.3 1.3 2008 Wes McKinney pandas pcap network packet capture 1.3 1.3 1988 LBNL dpkt dnslib pyprof Python Profile data 1.3 1.3 xml eXtensible Markup Language (XML) 1.3 from xml 1.3 1998 W3C lxml yaml YAML Ain't Markup Language (YAML) 1.3 1.3 2001 Clark Evans PyYAML frictionless Frictionless Data 2.0 2.0 OpenKnowledge Institute datapackage jira JIRA/Confluence table markup displayed text 2.0 Atlassian npy NumPy array format 2.0 typed 2.0 numpy tar Unix Tape Archive 2.0 2.0 usv Unicode-Separated Value 2.0 displayed text 2.0 1993 Unicode xlsb Excel binary format 2.0 2.0 Microsoft xlrd mysql MySQL 2.0 1995 MySQL AB https://github.com/mysql/mysql-server pdf Portable Document Format 2.0 1993 Adobe https://en.wikipedia.org/wiki/PDF vcf Virtual Contact File (vCard) 2.0 1995 Versit Consortium https://tools.ietf.org/html/rfc6350 rec recutils database file 2.0 displayed text 2010 Jose E. Marchesi https://www.gnu.org/software/recutils/ eml Multipurpose Internet Mail Extensions (MIME) 2.0 1996 Nathaniel Borenstein and Ned Freed https://tools.ietf.org/html/rfc2045"},{"location":"installazione/","title":"Installazione","text":"<p>Per gli sviluppatori, per chi usa la riga di comando, \u00e8 molto facile. \u00c8 scritto in Python 3 e di base basta usare l'installer di Python:</p> <pre><code>pip3 install visidata\n</code></pre> <p>Il requisito \u00e8 avere installato  Python 3; in ambiente Windows l'uso ottimale si realizza tramite Windows Subsystem for Linux.</p> <p>Se si vuole installare la versione di sviluppo, il comando \u00e8:</p> <pre><code>pip3 install --upgrade --no-warn-script-location git+https://github.com/saulpw/visidata.git@develop\n</code></pre>"},{"location":"lavorareCelle/","title":"Lavorare sulle celle","text":""},{"location":"lavorareCelle/#fare-un-trova-e-sostituisci-globale","title":"Fare un trova e sostituisci globale","text":"<p>Si parte dal selezionare le righe su cui si vuole eseguire l'operazione (se sono tutte il comando \u00e8 <code>gs</code>).</p> <p>Digitare <code>gz*</code> e poi scrivere <code>stringa da trovare</code>/<code>stringa da sostituire</code> e dare INVIO.</p> <p>Se ad esempio volessi sostituire la stringa <code>pal</code> con <code>mis</code>, dovrei scrivere <code>pal/mis</code>.</p> <p>\u00c8 possibile usare anche le espressioni regolari.</p>"},{"location":"lavorareCelle/#con-visidata-30","title":"Con VisiData &gt;= 3.0","text":"<p>Con VisiData &gt;= 3.0 la procedura \u00e8 leggermente diversa:</p> <ul> <li>si parte sempre dal selezionare le righe su cui si vuole eseguire l'operazione (se sono tutte il comando \u00e8 <code>gs</code>);</li> <li>digitare <code>gz*</code>, poi scrivere la <code>stringa da trovare</code>, poi fare click su TAB, poi scrivere la <code>stringa da sostituire</code> e infine dare INVIO.</li> </ul>"},{"location":"lavorareColonne/","title":"Lavorare sulle colonne","text":"<p>Ogni colonna in VisiData ha 3 attributi principali:</p> <ul> <li><code>Name</code>, il nome della colonna;</li> <li><code>Width</code>, la larghezza a schermo della colonna (se impostata a 0, la colonna diventa invisibile);</li> <li><code>Type</code>, per definire se contiene testi, numeri interi, numeri decimali, monete o date.</li> </ul>"},{"location":"lavorareColonne/#il-foglio-delle-colonne","title":"Il foglio delle colonne","text":"<p>In VisiData esistono i cosiddetti meta-fogli (vedi sopra): uno di questi \u00e8 il foglio delle colonne, che elenca tutte le colonne e i relativi attributi di una tabella.</p> <p>A partire dalla visualizzazione di una tabella, si apre con <code>Shift+c</code>.</p> <p></p> <p>\u00c8 una delle caratteristiche di VisiData che consente una rapida prima lettura del dato, che personalmente uso anche ad esempio per costruire brevi relazioni che contengono schema dati.</p>"},{"location":"lavorareColonne/#impostare-il-tipo-di-campo","title":"Impostare il tipo di campo","text":"<p>Come impostazione predefinita VisiData imposta a \"testo\" la tipologia di tutti i campi (che \u00e8 quello che faccio di solito anche io alla prima apertura sia in un foglio elettronico che in Pandas). Per definire il tipo di campo di una colonna della tabella che si sta visualizzando (cosa che consente di fare correttamente ad esempio operazioni di ordinamento, matematiche, ecc.), si deve navigare sino alla colonna su cui si vuole intervenire e poi pigiare:</p> <ul> <li><code>#</code>, per definire un campo con numeri interi (0, -1, 5000000)</li> <li><code>%</code>, per definire un campo con numeri decimali (0.5, -3.14, 23.45557)</li> <li><code>$</code>, per definire un campo con monete ($4.99, \u20ac20)</li> <li><code>@</code>, per definire un campo con date (2018-04-06, April 6, 2018, 04/06/2018)</li> <li><code>~</code>, per definire un campo di testo (qualsiasi cosa!)</li> </ul>"},{"location":"lavorareColonne/#impostare-numero-di-decimali-in-un-campo-floating","title":"Impostare numero di decimali in un campo floating","text":"<p>Di default i campi floating sono renderizzati con due decimali (la formattazione \u00e8 impostata come <code>%.02f</code>).</p> <p>Per modificare la cosa si pu\u00f2 aprire il foglio delle colonne (<code>SHIFT+c</code>) e modificare il valore di formattazione delle colonna <code>fmtstr</code> (vedi sotto).</p> <p></p> <p>Per passare a tre decimali per un campo, baster\u00e0 ad esempio modificare la cella della colonna di interesse da <code>%.02f</code> a <code>%.03f</code> (in edit di cella si va con il tasto <code>e</code>). Se si vuole fare su pi\u00f9 colonne:</p> <ul> <li>si apre sempre il foglio delle colonne;</li> <li>si selezionano le colonne di cui si vuole cambiare la formattazione;</li> <li>si va sulla colonna <code>fmtstr</code>;</li> <li>si va in modifica globale con <code>ge</code> e si inserisce il valore di formattazione desiderato;</li> <li>si preme <code>INVIO</code> per applicare la modifica.</li> </ul>"},{"location":"lavorareColonne/#impostare-formato-data-personalizzato","title":"Impostare formato data personalizzato","text":"<p>Se una cella contiene ad esempio la data <code>06/11/2020</code> (qui come 6 novembre 2020), e imposto la colonna come data con il tasto <code>@</code>, visidata la interpreta come <code>2020-06-11</code>, ovvero come 11 giugno.</p> <p>Per impostarla correttamente bisogna impostare un formato data personalizzato:</p> <ul> <li>si va sulla colonna con le date;</li> <li>si digita <code>z@</code> e si preme INVIO;</li> <li>si imposta il formato - in questo caso <code>%d/%m/%Y</code> - e si preme INVIO.</li> </ul> <p>In output si avr\u00e0 <code>2020-11-06</code>.</p>"},{"location":"lavorareColonne/#rinominare-le-colonne","title":"Rinominare le colonne","text":"<p>Per farlo si naviga sino alla colonna che si vuole rinominare e poi:</p> <ul> <li>si pigia <code>^</code>;</li> <li>si digita il nome che si vuole assegnare;</li> <li>si pigia <code>Invio</code>.</li> </ul>"},{"location":"lavorareColonne/#rinominare-le-colonne-in-blocco","title":"Rinominare le colonne in blocco","text":"<p>Pu\u00f2 essere utile ad esempio anteporre dei caratteri a tutte le colonne che iniziano per <code>t</code>.</p> <p>Questi i passi:</p> <ul> <li>si apre il foglio colonne con <code>shift + c</code>;</li> <li>si va nella colonna con il nome delle colonne (\u00e8 la prima);</li> <li>si digita <code>|</code>, si scrive <code>^t</code> e si pigia <code>INVIO</code> (saranno selezionate tutte le colonne che iniziano con il carattere <code>t</code>);</li> <li>si pigia <code>g*</code>, per attivare il trova e sostituisci via regex;</li> <li>si scrive <code>^(t.+)/TR_\\1</code> e poi <code>INVIO</code>.</li> </ul> <p>Tutte le colonne che iniziano per <code>t</code>, avranno un nuovo nome corrispondente al precedente, con <code>TR_</code> come prefisso. La colonna <code>tabacco</code>, diventerebbe ad esempio <code>TR_tabacco</code>.</p>"},{"location":"lavorareColonne/#come-espandere-ridurre-e-rimuovere-colonne","title":"Come espandere, ridurre e rimuovere colonne","text":"<p>Questi gli shortcut:</p> <ul> <li><code>_</code>, per espandere la larghezza della colonna corrente, alla larghezza massima del testo contenuto nella stessa, tenendo conto delle righe visualizzate a schermo;</li> <li><code>g_</code>, per espandere la larghezza di tutte le colonne, alla larghezza massima del testo contenuto, tenendo conto delle righe visualizzate a schermo;</li> <li><code>z_ + n</code>, per impostare la larghezza della colonna corrente a <code>n</code> caratteri;</li> <li><code>-</code>, per nascondere la colonna corrente (viene impostata a 0 la sua larghezza);</li> <li><code>gv</code>, per scoprire tutte le colonne nascoste;</li> <li><code>z-</code>, per ridurre la larghezza della colonna corrente alla sua met\u00e0.</li> </ul>"},{"location":"lavorareColonne/#spostare-una-colonna","title":"Spostare una colonna","text":"<p>Ecco come farlo:</p> <ul> <li><code>Shift+h</code>, sposta la colonna corrente di una posizione a sinistra;</li> <li><code>Shift+l</code>, sposta la colonna corrente di una posizione a destra.</li> </ul>"},{"location":"lavorareColonne/#modificare-una-colonna-tramite-unespressione-python","title":"Modificare una colonna tramite un'espressione Python","text":"<p>A questa tabella si vuole assegnare al campo <code>FieldA</code> il valore di <code>FieldB</code>, tutte le volte che <code>FieldA</code> \u00e8 vuoto.</p> FieldA FieldB 1 3 1 12 <p>Questa la procedura:</p> <ul> <li><code>gs</code> per selezionare tutte le righe;</li> <li><code>g=</code> per scrivere l'espressione Python;</li> <li>aggiungere come espressione <code>FieldB if FieldA==\"\" else FieldA</code>.</li> </ul> <p>Ovvero (<code>FieldA</code>) \u00e8 uguale <code>FieldB</code> se <code>FieldA</code> non contiene nulla, altrimenti \u00e8 uguale a se stesso (rimane invariato).</p>"},{"location":"lavorareColonne/#calcoli-per-colonna","title":"Calcoli per colonna","text":"<p>\u00c8 possibile avere restituito, per una colonna, il risultato di uno dei calcoli di aggregazione disponibili:</p> <p></p> <p>Ad esempio per avere la somma dei valori di una colonna con numeri interi:</p> <ul> <li>si imposta il tipo di colonna a numero intero (con <code>#</code>);</li> <li>si digita <code>z+</code> e poi <code>INVIO</code>;</li> <li>si digita <code>sum</code> e poi <code>INVIO</code>.</li> </ul> <p>In basso, si legger\u00e0 il valore risultante.</p> <p>Nota bene</p> <p>Se nessuna riga \u00e8 selezionata si avr\u00e0 il totale per colonna, altrimenti il calcolo sar\u00e0 applicato per colonna alle sole righe selezionate.</p>"},{"location":"lavorareColonne/#come-definire-una-colonna-chiave","title":"Come definire una colonna chiave","text":"<p>Per ogni foglio \u00e8 possibile definire una o pi\u00f9 colonne chiave. Hanno due funzioni principali:</p> <ul> <li>rimangono fissate sul lato sinistro, quando si naviga orizzontalmente sulla tabella;</li> <li>hanno una funzione speciale quando si fanno certe operazioni (come quelle di JOIN, per alcuni conteggi, ecc.).</li> </ul> <p>Per definire una colonna chiave (e vice-versa) si naviga sino alla colonna di interesse e si pigia <code>!</code>.</p>"},{"location":"lavorareColonne/#manipolare-le-colonne-dal-foglio-delle-colonne","title":"Manipolare le colonne dal foglio delle colonne","text":"<p>Il foglio delle colonne oltre a dare una visione di insieme, consente di fare delle rapide modifiche in blocco. \u00c8 possibile spostare le colonne con <code>Shift+j</code> e <code>Shift+k</code>, rinominarle con <code>e</code>, impostare il tipo per tutte quelle selezionate, impostare la larghezza per tutte quelle selezionate.</p> <p>Ad esempio a partire dal Parco Circolante dei veicoli dell'Abruzzo, il foglio colonne (<code>Shift+c</code>) appare in questo modo.</p> <p></p> <p>Se si vuole impostare a \"numero intero\" le colonne <code>progressivo</code> e <code>eta_intestatario</code>, bisogner\u00e0 prima selezionarle con <code>s</code>.</p> <p></p> <p>Poi premere <code>g#</code>.</p> <p></p>"},{"location":"lavorareColonne/#creare-una-nuova-colonna","title":"Creare una nuova colonna","text":"<p>Sono tre le modalit\u00e0 pi\u00f9 comode:</p> <ul> <li>come risultato di un'espressione Python;</li> <li>come risultato di un comando di split;</li> <li>come risultato di estrazione di una porzione di testo da una colonna.</li> </ul>"},{"location":"lavorareColonne/#nuova-colonna-tramite-espressione","title":"Nuova colonna tramite espressione","text":"<p>Ad esempio potrebbe essere utile creare una colonna vero/falso, per tutte le auto del Parco Circolante dei veicoli dell'Abruzzo, con cilindrata maggiore ai 643 (\u00e8 un numero a caso). Per farlo:</p> <ul> <li>navigare sino alla colonna <code>cilindrata</code>;</li> <li>premere <code>%</code> per impostarla come numero decimale;</li> <li>pigiare su <code>=</code>;</li> <li>nel prompt in basso a sinistra scrivere <code>cilindrata &gt; 643</code>;</li> <li>premere <code>Invio</code>.</li> </ul> <p>In output qualcosa come quella di sotto, con la nuova colonna risultato di un'espressione Python.</p> <p></p>"},{"location":"lavorareColonne/#nuove-colonne-come-risultato-di-splitting","title":"Nuove colonne come risultato di splitting","text":"<p>Si possono creare nuove colonne, come risultato di una suddivisione di una gi\u00e0 esistente. Ad esempio nel campo <code>data_immatricolazione</code> \u00e8 contenuta sia la data che l'orario, separati da spazio (i.e. <code>1995-04-03 00:00:00</code>).  Se si vuole suddividerla in due colonne (data e orario), si pu\u00f2 procedere in questo modo:</p> <ul> <li>si naviga sino alla colonna <code>data_immatricolazione</code>;</li> <li>si preme <code>:</code>;</li> <li>si sceglie la stringa di testo (definibile anche come espressione regolare) da usare come separatore e si scrive in basso a sinistra nel prompt. In questo caso \u00e8 lo spazio;</li> <li>si digita quindi lo spazio e si d\u00e0 <code>Invio</code>.</li> </ul> <p>Come output si avr\u00e0 qualcosa come quella di sotto: due colonne frutto della divisione in pi\u00f9 colonne, sfruttando come separatore lo spazio.</p> <p></p> <p>Novit\u00e0 in VisiData &gt;= 3.0</p> <p>Se usi VisiData &gt;= 3.0, la procedura \u00e8 cambiata. In output viene restituita una colonna che contiene l'array dei valori risultato dello split: se la vuoi espandere in colonne, vai sulla colonna che contiene l'array e fai click su (.</p>"},{"location":"lavorareColonne/#nuove-colonne-come-risultato-di-cattura-e-estrazione","title":"Nuove colonne come risultato di cattura e estrazione","text":"<p>Per farlo ci vogliono delle conoscenze di base sulle espressioni regolari (che sono una conoscenza propedeutica per chiunque lavori con i dati).</p> <p>Se si vuole ad esempio estrarre l'anno dalla celle che contiene il valore <code>1995-04-03 00:00:00</code>, baster\u00e0 definire l'espressione regolare che estrae a partire dall'inizio della cella i primi 4 numeri. Che in termini di espressione regolare \u00e8 <code>^[0-9]{4}</code>.</p> <p>Per creare una nuova colonna a partire dalla definizione di un'espressione regolare da usare come \"estrattore\", si procede in questo modo:</p> <ul> <li>si naviga sulla colonna <code>data_immatricolazione</code>;</li> <li>si pigia <code>;</code>;</li> <li>si scrive nel prompt in basso a sinistra <code>^([0-9]{4})</code>. Sono state inserite le parentesi tonde, perch\u00e9 la cattura si fa a partire dalla definizione di un gruppo;</li> <li>si pigia <code>Invio</code>.</li> </ul> <p>E si ottiene qualcosa come quella di sotto:</p> <p></p>"},{"location":"lavorareColonne/#trasformare-una-colonna-tramite-espressione-regolare-trova-e-sostituisci","title":"Trasformare una colonna tramite espressione regolare (trova e sostituisci)","text":"<p>Questa procedura non \u00e8 pi\u00f9 valida per VisiData &gt;= 3.0</p> <p>Fare riferimento alla sezione successiva, per vedere come fare con VisiData &gt;= 3.0.</p> <p>Su ogni colonna \u00e8 possibile fare delle trasformazioni basate su espressioni regolari. Se ad esempio si vogliono rimuovere dalle celle della colonna <code>data_immatricolazione</code> le informazioni sull'orario e passare quindi da <code>1995-04-03 00:00:00</code> a <code>1995-04-03</code> si pu\u00f2 procedere in questo modo:</p> <ul> <li>si selezionano le righe su cui si vuole fare questa trasformazione (se sono tutte il comando \u00e8 <code>gs</code>);</li> <li>si va nella colonna <code>data_immatricolazione</code>;</li> <li>si pigia su <code>g*</code>;</li> <li>si scrive nel prompt <code>.*$/</code>. Il simbolo <code>/</code> in VisiData separa ci\u00f2 che si cerca, da ci\u00f2 con cui si vuole sostituire. Qui si cerca uno spazio (<code></code>), seguito da qualsiasi carattere sino a fine cella (<code>.*$</code>), e si vuole sostituire con nulla;</li> <li>si pigia <code>Invio</code> (ci vorr\u00e0 un po' di tempo, sono pi\u00f9 di un milione di righe).</li> </ul> <p>Il risultato sar\u00e0 qualcosa come quella di sotto:</p> <p></p> <p>Questo \u00e8 un \"trova e sostituisci\" per colonna.</p>"},{"location":"lavorareColonne/#trasformare-una-colonna-tramite-espressione-regolare-visidata-30","title":"Trasformare una colonna tramite espressione regolare - VisiData &gt;= 3.0","text":"<p>Con VisiData &gt;= 3.0, la procedura \u00e8 cambiata. Si procede in questo modo:</p> <ul> <li>si selezionano le righe su cui si vuole fare questa trasformazione (se sono tutte il comando \u00e8 <code>gs</code>);</li> <li>si va nella colonna <code>data_immatricolazione</code>;</li> <li>si pigia su <code>g*</code>;</li> <li>si scrive la <code>stringa da trovare</code>, poi si fa click su TAB, poi si scrive la <code>stringa da sostituire</code> e infine si d\u00e0 INVIO.</li> </ul>"},{"location":"lavorareRighe/","title":"Lavorare sulle righe","text":"<p>La cosa pi\u00f9 importante da comprendere \u00e8 come selezionarle e deselezionarle, perch\u00e9 molte delle operazioni vengono  eseguite proprio su quelle selezionate.</p> <p>I tasti principali di selezione sono:</p> <ul> <li><code>s</code>, per selezionare la riga corrente;</li> <li><code>u</code>, per deselezionare la riga corrente;</li> <li><code>t</code>, per invertire la selezione della riga corrente;</li> <li><code>gs</code>, per selezionare tutte le righe;</li> <li><code>gu</code>, per deselezionare tutte le righe;</li> <li><code>gt</code>, per invertire i criteri di selezione per tutte le righe.</li> </ul> <p></p>"},{"location":"lavorareRighe/#selezione-di-righe-tramite-espressione-regolare","title":"Selezione di righe tramite espressione regolare","text":"<ul> <li><code>| + termine da ricercare</code>, seleziona tutte le righe in cui c'\u00e8 corrispondenza per la colonna corrente;</li> <li><code>\\ + termine da ricercare</code>, deseleziona tutte le righe in cui c'\u00e8 corrispondenza per la colonna corrente;</li> <li><code>g| + termine da ricercare</code>, seleziona tutte le righe in cui c'\u00e8 corrispondenza per una qualsiasi colonna;</li> <li><code>g\\ + termine da ricercare</code>, deseleziona tutte le righe in cui c'\u00e8 corrispondenza per una qualsiasi colonna;</li> <li><code>,</code>, dato il valore della cella selezionata, seleziona tutte le righe in cui per la colonna corrente c'\u00e8 corrispondenza;</li> <li><code>g,</code>, seleziona tutte le righe uguali a quelle corrente.</li> </ul> <p>Ad esempio si apre questo file con VisiData:</p> <ul> <li>ci si sposta nella colonna <code>provincia_residenza</code></li> <li>poi si pigia <code>|</code>;</li> <li>si digita <code>TERAMO</code>;</li> <li>si preme <code>Invio</code>.</li> </ul> <p>... si ottiene qualcosa come quella di sotto.</p> <p></p>"},{"location":"lavorareRighe/#selezione-di-righe-tramite-espressioni-python","title":"Selezione di righe tramite espressioni Python","text":"<p>\u00c8 possibile fare una selezione di righe tramite un'espressione di Python (qui per approfondire sui concetti di base delle espressioni).</p> <p>I comandi da tastiera sono:</p> <ul> <li><code>z|</code>, per selezionare tutte le righe in cui l'espressione \u00e8 valida;</li> <li><code>z\\</code>, per deselezionare tutte le righe in cui l'espressione \u00e8 valida.</li> </ul> <p>Ad esempio se voglio selezionare da questo file tutte le righe relative a donne, la cui provincia di residenza \u00e8 \"Pescara\", questi gli step:</p> <ul> <li><code>gu</code>, per deselezionare tutto;</li> <li><code>z|</code>, per attivare la selezione tramite espressione Python;</li> <li>scrivendo <code>provincia_residenza == \"PESCARA\" and sesso == \"F\"</code>;</li> <li>e pigiando su <code>Invio</code>.</li> </ul> <p>... verranno selezionati tutti gli elementi in cui la provincia \u00e8 \"Pescara\" ed il sesso \u00e8 \"F\".</p>"},{"location":"lavorareRighe/#selezione-di-righe-tramite-espressioni-python-e-regex","title":"Selezione di righe tramite espressioni Python e regex","text":"<ul> <li>si digita <code>z|</code>;</li> <li>si scrive l'espressione, come ad esempio <code>re.search(\"^1\", FieldB) and re.search(\"^2\", FieldA)</code>, ovvero tutte le righe in cui il campo <code>FieldB</code> inizia per <code>1</code> e il campo <code>FieldA</code> per <code>2</code>.</li> </ul> <p>Attenzione</p> <p>Per utilizzare le espressioni regolari all'interno di una Python expression bisogna importare il modulo Python <code>re</code>. Qui le note per farlo.</p>"},{"location":"lavorareRighe/#selezionare-un-numero-random-di-righe","title":"Selezionare un numero random di righe","text":"<ul> <li>aprire una tabella;</li> <li>fare click sulla barra spaziatrice ;</li> <li>scrivere <code>random-rows</code> (si pu\u00f2 scrivere anche soltanto ad esempio <code>ran</code> e autocompletare con TAB ) e premere INVIO ;</li> <li>scrivere il numero di righe random che si vogliono selezionare.</li> </ul>"},{"location":"lavorareRighe/#spostare-righe","title":"Spostare righe","text":"<p>Si fa con queste combinazioni:</p> <ul> <li><code>SHIFT+J</code>, per spostare la riga corrente verso il basso;</li> <li><code>SHIFT+K</code>, per spostare la riga corrente verso l'alto.</li> </ul>"},{"location":"lavorareRighe/#cancellare-righe","title":"Cancellare righe","text":"<ul> <li>D per cancellare la riga corrente;</li> <li>G + D per cancellare le righe selezionate.</li> </ul>"},{"location":"lavorareRighe/#modificare-il-contenuto","title":"Modificare il contenuto","text":"<p>Questi i comandi di base:</p> <ul> <li><code>e</code>, per modificare la cella corrente;</li> <li><code>INVIO</code>, per chiudere la modifica;</li> <li><code>CTRL+C</code>, per cancellare la modifica;</li> <li><code>CTRL+A</code>, per andare a inizio linea;</li> <li><code>CTRL+E</code>, per andare a fine linea;</li> <li><code>CTRL+K</code>, per cancellare il contenuto a partire dalla posizione del cursore.</li> </ul>"},{"location":"lavorareRighe/#ordinare-e-filtrare","title":"Ordinare e filtrare","text":""},{"location":"lavorareRighe/#ordinare-righe","title":"Ordinare righe","text":"<p>I tasti <code>[</code> e <code>]</code> ordinano i dati rispettivamente in modo crescente e decrescente, a partire dalla colonna attiva.</p>"},{"location":"lavorareRighe/#filtrare-righe","title":"Filtrare righe","text":"<p>\u00c8 possibile estrarre in vari modi un campione delle righe della tabella visualizzata. Quello di base \u00e8 a partire dalla selezione delle righe (in uno dei modi visti sopra) e poi pigiare <code>\"</code>. Ad esempio si naviga sino alla colonna <code>marca</code>, si preme <code>|</code>, si scrive <code>chevr</code>, si pigia <code>INVIO</code> (vengono selezionati tutti i record associati a <code>CHEVROLET</code>) e infine si preme <code>\"</code>. Si avr\u00e0 una tabella filtrata, con gli 8814 record relativi a questa marca per l'Abruzzo.</p> <p>Oppure posso farlo a partire da un \"foglio delle frequenze\" (vedi qui):</p> <ul> <li>si naviga sino alla colonna <code>marca</code>;</li> <li>si pigia <code>SHIFT+F</code>, che mi da in output il conteggio dei valori distinti per marca (sono pi\u00f9 di un milione di record, ci vorr\u00e0 un po' di tempo);</li> <li>si scorre sino alla riga che contiene la marca che si vuole filtrare;</li> </ul> <p></p> <ul> <li>si pigia <code>INVIO</code> e si avr\u00e0 una tabella filtrata, con i record relativi a quella marca per l'Abruzzo.</li> </ul> <p></p> <p>Dal foglio delle frequenze \u00e8 possibile filtrare su pi\u00f9 di un elemento:</p> <ul> <li>si selezionano ad esempio tre marche, pigiando <code>s</code> per ognuna;</li> <li>si chiude il foglio delle frequenze con <code>q</code> e si torna al foglio dati;</li> <li>si pigia <code>\"</code> e si ottiene una tabella filtrata con i dati relativi alle sole tre marche selezionate prima.</li> </ul>"},{"location":"lavorareRighe/#filtro-tramite-espressione-python","title":"Filtro tramite espressione Python","text":"<p>\u00c8 possibile filtrare righe tramite un'<code>espressione</code> Python (qui la documentazione ufficiale e qui una guida che consiglio). Se ad esempio dalla tabella di sotto si volessero soltanto le province con pi\u00f9 di 350.000 abitanti</p> <p></p> <p>basterebbe:</p> <ul> <li>per prima cosa impostare il campo <code>Popolazione</code> come numerico, pigiando #;</li> <li>pigiare <code>z|</code> per attivare il filtro tramite espressione Python;</li> <li>scrivere l'espressione basata sulla colonna, che qui \u00e8 <code>Popolazione&gt;350000</code> e poi premere INVIO.</li> </ul> <p>In output si avr\u00e0 la selezione di tutte le righe che risolvono l'espressione scritta.</p> <p></p> <p>Note:</p> <ul> <li>nel filtro per espressione c'\u00e8 l'autocompletamento del nome colonna, quindi se si scrive ad esempio <code>Pop</code> e poi si fa click su TAB, viene restituito a schermo <code>Popolazione</code>;</li> <li>\u00e8 possibile scrivere espressioni complesse, che fanno riferimento a pi\u00f9 colonne.</li> </ul>"},{"location":"lavorareRighe/#filtro-tramite-espressione-python-su-campo-datetime","title":"Filtro tramite espressione Python su campo datetime","text":"<p>\u00c8 possibile filtrare righe tramite un'espressione Python a partire da campi <code>datetime</code>, dopo averli impostati come campi di tipo \"data\".</p> <p>Usando questo file CSV (by PCM-DPC), se ad esempio dalla tabella di sotto si volessero soltanto i record con giorno 29:</p> <p></p> <p>basterebbe:</p> <ul> <li>per prima cosa impostare il campo <code>data</code> come data, pigiando @;</li> <li>pigiare <code>z|</code> per attivare il filtro tramite espressione Python;</li> <li>scrivere l'espressione basata sulla colonna, che qui \u00e8 <code>data.day == 29</code> e poi premere INVIO.</li> </ul> <p>In output si avr\u00e0 la selezione di tutte le righe che risolvono l'espressione scritta.</p> <p></p> <p>Osservazioni: oltre a <code>day</code> \u00e8 possibile usare: <code>month</code>, <code>year</code>e <code>hour</code></p> <p>Se si vogliono ad esempio selezionare soltanto righe con date nel futuro, l'espressione sar\u00e0 <code>data &gt; datetime.datetime.now()</code>.</p> <p>Se si ha a disposizione un campo data (<code>last_modified</code>) e si prova <code>last_modified &gt; \"2025-10-11\"</code> non verr\u00e0 selezionata nessuna riga, perch\u00e9 VisiData confronta un oggetto <code>datetime</code> con una stringa. Per rendere pi\u00f9 semplici espressioni basate su date e orari, \u00e8 comodo modificare il file di configurazione <code>~/.visidatarc</code> di VisiData e aggiungere:</p> <pre><code>import datetime\nfrom datetime import timezone\n</code></pre> <p>Questo fa s\u00ec che VisiData abbia sempre disponibili le funzioni <code>datetime</code> e <code>timezone</code>, necessarie per gestire le date, anche con fuso orario.</p> <p>E si potr\u00e0 applicare il filtro di sopra in questo modo: <code>last_modified.date() &gt; datetime.date(2025, 10, 11)</code>.</p>"},{"location":"lavorareRighe/#filtri-tramite-espressione-python-basata-su-piu-colonne","title":"Filtri tramite espressione python, basata su pi\u00f9 colonne","text":"<p>Si vogliono ad esempio selezionare tutte le righe in cui il domicilio non \u00e8 n\u00e9 a Palermo, n\u00e9 a Ragusa, ma la cui residenza \u00e8 in una di queste due citt\u00e0.</p> <p>A partire ad esempio da:</p> domicilio residenza PA PA RG RG TO TO VE PA <p>Questa la procedura:</p> <ul> <li>pigiare <code>z|</code> per selezionare tramite espressione Python;</li> <li>scrivere <code>re.search(\"^(?!PA|RG).*\", domicilio) and re.search(\"(PA|RG)\", residenza)</code>;</li> <li>premere INVIO.</li> </ul> <p>La prima \u00e8 una speciale condizione di <code>regex</code>, che cerca al negativo.</p> <p>Sar\u00e0 selezionata soltanto la riga seguente:</p> domicilio residenza VE PA <p>Attenzione</p> <p>Questa espressione sfrutta il modulo <code>re</code> di Python, che non \u00e8 importato by default in VisiData. Quindi dovrai aggiungere l'istruzione di <code>import</code> nel file di configurazione.</p>"},{"location":"navigare/","title":"Navigare tra i dati","text":"<p>Per muoversi tra le celle si usano le 4 frecce direzionali dalla tastiera o (come vim, da cui nell'uso da tastiera VisiData prende molta ispirazione) <code>h</code>,<code>j</code>,<code>k</code>,<code>l</code>.</p> <p>Per muoversi in modo pi\u00f9 esteso:</p> <ul> <li><code>g + freccia in basso</code> oppure <code>gj</code>, o <code>End</code>, per andare all'ultima riga;</li> <li><code>g + freccia in alto</code> oppure <code>gk</code>, o <code>Home</code>, per andare alla prima riga;</li> <li><code>g + freccia a sinistra</code> oppure <code>gh</code>, per andare alla colonna pi\u00f9 a sinistra;</li> <li><code>g + freccia a destra</code> oppure <code>gl</code>, per andare alla colonna pi\u00f9 a destra;</li> <li><code>PageDown</code> oppure <code>Control + Shift + f</code>, una pagina in gi\u00f9;</li> <li><code>PageUp</code> oppure <code>Control + Shift + b</code>, una pagina in alto.</li> </ul> <p>Nota bene</p> <p>G \u00e8 il tasto per i comandi \"globali\".</p> <p>Per muoversi tramite ricerca testuale, sfruttando le espressioni regolari:</p> <ul> <li><code>/ + regex</code>, cerca in avanti nella colonna corrente;</li> <li><code>? + regex</code>, cerca indietro nella colonna corrente;</li> <li><code>g/ + regex</code>, cerca in avanti in tutte le colonne;</li> <li><code>g? + regex</code>, cerca indietro in tutte le colonne;</li> </ul> <p>Con <code>n</code> e <code>N</code> si va avanti e indietro rispetto agli elementi di output del risultato della ricerca.</p> <p>Infine per saltare a una determinata riga o colonna, rispettivamente <code>zr</code> e <code>zc</code> seguito dal numero di riga e colonna (la numerazione inizia da zero).</p>"},{"location":"note/","title":"Note personali","text":"<p>(di <code>Andrea Borruso</code>)</p> <p>Il grande Jeremy Singer Vine usa VisiData da molto pi\u00f9 tempo di me e ha creato la migliore guida introduttiva dedicata a VisiData, di cui sono orgoglioso di essere nei ringraziamenti. Ne ho attinto a piene mani per scrivere questa e colgo l'occasione per ringraziarlo di cuore pubblicamente.</p> <p>VisiData \u00e8 un'applicazione molto bella, che probabilmente per alcuni diverr\u00e0 (come \u00e8 adesso per me) di uso quotidiano. Jeremy afferma che per analisi complesse, analisi geospaziali, data literature \u00e8 meglio usare altro. Mi sembra sensato.</p> <p>Non sostituisce <code>R</code> o <code>pandas</code>, ma li pu\u00f2 certamente affiancare e spesso precedere nel workflow di lavoro sui dati. \u00c8 un altro strumento che consiglio di aggiungere nella cassetta degli attrezzi.</p> <p>Lo sviluppatore principale di VisiData - Saul Pwanson - e le persone  che collaborano con lui sono molto attente alle richieste e alle proposte che vengono dall'esterno, in una bella mescolanza di sensibilit\u00e0 \"tecnologica\" e umana. Ho aperto nel tempo diverse issue a cui \u00e8 stato dato sempre riscontro. Alcune erano da uomo primitivo, altre erano buone: \u00e8 un vero piacere sapere di avere avuto degli effetti nel rilascio della versione <code>1.5.1</code> e di essere citato pi\u00f9 volte nelle note di rilascio.</p> <p>Qui vorremmo aggiornare e arricchire nel tempo i testi e si accettano anche proposte di integrazioni, correzioni e modifiche.</p> <p> Alcuni grazie:</p> <ul> <li>a Saul Pwanson, per avere inventato VisiData e per essere una persona brillante e generosa;</li> <li>a Anja Kefala, per essere sempre presente e attenta nelle gestione delle issue di progetto e per il contributo allo sviluppo di VisiData;</li> <li>a Jeremy Singer-Vine, per aver scritto la guida VisiData pi\u00f9 bella, per essere una continua fonte di ispirazione;</li> <li>a Ciro Spataro, Gianni Vitrano e Tot\u00f2 Fiandaca, che seguono questa guida dalla sua prima versione, per i loro contributi e i tanti suggerimenti e stimoli;</li> <li>a Martin Donath, per avere inventato Material for MkDocs (il motore di questa guida).</li> </ul> <p></p>"},{"location":"primiPassi/","title":"Primi passi","text":"<p>VisiData si utilizza dalla <code>shell</code>, quindi il primo passo \u00e8 aprirla.</p> <p>File di esempio</p> <p>In questa guida, alle volte si fa riferimento a dei file per sviluppare degli esempi. Questi si trovano nel repo di progetto in questa cartella.</p>"},{"location":"primiPassi/#aprire-un-file","title":"Aprire un file","text":"<p>Il comando di base \u00e8:</p> <pre><code>vd nomeFile\n</code></pre> <p>Se il file di input \u00e8 ad esempio questo CSV</p> <pre><code>id,Variable,Value\n1,size,55\n1,material,wood\n2,size,100\n2,material,iron\n2,shape,round\n</code></pre> <p>nella <code>shell</code> saranno visualizzati i relativi dati contenuti in esso</p> <p></p> <p>Nota</p> <p>Se il file non \u00e8 un \"vero CSV\" e utilizza altri separatori di campo (come il punto e virgola <code>;</code>) \u00e8 possibile aprire il file aggiungendo il flag <code>--csv-delimiter</code> e specificando il delimitatore tra doppie virgolette. Di seguito un esempio:</p> <pre><code>vd --csv-delimiter \";\" nomeFile.csv\n</code></pre>"},{"location":"primiPassi/#tramite-url","title":"Tramite URL","text":"<p>\u00c8 possibile aprire un file anche a partire dal suo URL pubblico. Ad esempio:</p> <pre><code>vd \"https://raw.githubusercontent.com/ondata/guidaVisiData/master/docs/dati/inputFileOne.csv\"\n</code></pre>"},{"location":"primiPassi/#formati-file","title":"Formati file","text":"<p>VisiData supporta decine di formati di file: tra questi <code>TSV</code>,<code>CSV</code>,<code>sqlite</code>,<code>JSON</code>,<code>XML</code>,<code>XLSX</code>,<code>html</code>, ecc.. Il suo formato di default \u00e8 il TSV.</p> <p>Nota bene</p> <p>Se il file non ha estensione - ad esempio si chiama <code>input</code> - e lo apri con <code>vd input</code>, VisiData lo interpreter\u00e0 come un TSV.</p> <p>L'interpretazione del formato viene fatta in due modi:</p> <ul> <li>se il file ha l'estensione, viene ricavato da questa;</li> <li>oppure si pu\u00f2 forzare il formato con un'opzione in apertura. Se si vuole ad esempio che il file sia interpretato come un JSON, il comando sar\u00e0 <code>vd -f json input</code>.</li> </ul>"},{"location":"release/","title":"Versioni","text":"Versione Data di rilascio Dettagli 2.7 2021-11-15 2.6 2021-09-20"},{"location":"ricette/","title":"Ricette","text":""},{"location":"ricette/#filtrare-un-campo-con-delle-date","title":"Filtrare un campo con delle date","text":"<p>Si ha a disposizione un file come quello di sotto, da cui si vogliono estrarre soltanto le righe che contengono date comprese tra i giorni 8 agosto 2020 e 2 maggio 2023. Nota bene, il campo <code>data</code> di questo CSV ha una struttura <code>YYYY-MM-DD</code>, che consente di usare in modo \"nativo\" le funzioni Python sulle date.</p> <pre><code>id,data\n1,2020-12-05\n2,2020-07-08\n3,2024-12-05\n</code></pre> <p>Questi i passi da eseguire:</p> <ul> <li>si va sulla colonna <code>data</code>;</li> <li>si imposta per questa il tipo di campo, indicando che \u00e8 un campo che contiene date, facendo click su <code>@</code>;</li> <li>si fa click su <code>z|</code> per applicare un'espressione Python (vedi sotto);</li> <li>si scrive un'espressione coerente con gli obiettivi e si fa click su INVIO.</li> </ul> <p>L'espressione per applicare il filtro descritto sopra \u00e8:</p> <pre><code>data &gt; datetime.date(2020,8,8) and data &lt; datetime.date(2023,5,2)\n</code></pre> <p>Sar\u00e0 selezionata soltanto la riga <code>1,2020-12-05</code>.</p>"},{"location":"ricette/#salvare-una-tabella-html-in-csv-a-partire-da-una-pagina-web","title":"Salvare una tabella HTML in CSV, a partire da una pagina web","text":"<p>In questo esempio il presupposto \u00e8 che si voglia trasformare in CSV una tabella HTML presente in una pagina web, in cui ci sono pi\u00f9 tabelle. Il punto di partenza \u00e8 quello di estrarre dalla pagina sorgente, una pagina HTML che contiene soltanto la tabella di interesse.</p> <p>La pagina di esempio \u00e8:https://web.archive.org/web/20190618071304/http://www.sias.regione.sicilia.it/NHEOWLH140_00_1.html</p> <p>Questa \u00e8 composta da diverse tabelle.</p> <p></p> <p>Quella di interesse \u00e8 l'unica composta da pi\u00f9 di 7 colonne, e la query XPATH per estrarla \u00e8 <code>//table[count(tr/td)&gt;7]</code>.</p> <p>La pagina di origine ha l'encoding in <code>ISO-8859-1</code>, ed \u00e8 da convertire in <code>UTF-8</code>.</p> <p>Per scaricare la pagina, cambiarne l'encoding ed estrarre la tabella di interesse il comando pu\u00f2 essere</p> <pre><code>curl \"http://www.sias.regione.sicilia.it/NHEOWLH140_00_1.html\" | \\\niconv -f ISO-8859-1 -t utf-8  | \\\nscrape -be '//table[count(tr/td)&gt;7]'\n</code></pre> <p>L'utility usata sopra per fare la query <code>XPATH</code> \u00e8 scrape-cli. In output si ha una pagina web che contiene soltanto la tabella di interesse.</p> <p>Per passarla a VisiData bisogner\u00e0 modificare cos\u00ec lo script:</p> <pre><code>curl \"http://www.sias.regione.sicilia.it/NHEOWLH140_00_1.html\" | \\\niconv -f ISO-8859-1 -t utf-8  | \\\nscrape -be '//table[count(tr/td)&gt;7]' | \\\nvd -f html\n</code></pre> <p>Come risultato si aprir\u00e0 la finestra di sotto. Per aprire la tabella sar\u00e0 necessario premere <code>INVIO</code> e poi si potr\u00e0 salvare la tabella in CSV (o altri formati) digitando <code>CTRL+ s</code>.</p> <p></p> <p>Se si vuole inserire nello script anche la procedura di salvataggio, bisogna modificare lo script in questo modo:</p> <pre><code>curl \"http://www.sias.regione.sicilia.it/NHEOWLH140_00_1.html\" | \\\niconv -f ISO-8859-1 -t utf-8  | \\\nscrape -be '//table[count(tr/td)&gt;7]' | \\\nvd -b -f html -o out.csv -p dive.vd\n</code></pre> <p>Note:</p> <ul> <li><code>-b</code> \u00e8 per eseguire VisiData senza interfaccia;</li> <li><code>-p dive.vd</code> per eseguire dei comandi (qui semplicemente l'apertura della tabella a partire dalla finestra iniziale di sopra).</li> </ul> <p>Nel file <code>dive.vd</code> c'\u00e8 il seguente contenuto.</p> <pre><code>sheet   col row longname    input   keystrokes  comment\n            open-file   -   o\n-       0   dive-row        ^J\n</code></pre> <p>Il file di sopra \u00e8 un file di log di VisiData (vedi sezione dedicata). Tutte le operazioni fatte in VisiData finiscono in un log che pu\u00f2 essere visualizzato e salvato. Quindi \u00e8 possibile salvare la visualizzazione dell'elenco delle tabelle e poi l'apertura di quella di interesse.</p> <p>Per creare questo di sopra:</p> <ul> <li>arrivare a visualizzare la tabella su VisiData;</li> <li>digitare <code>INVIO</code>;</li> <li>digitate <code>SHIFT + d</code> per visualizzare il log dei comandi;</li> <li>e infine <code>CTRL + s</code> per salvare il file <code>dive.vd</code>.</li> </ul>"},{"location":"ricette/#salvare-in-blocco-tutte-le-tabelle-di-una-pagina-web","title":"Salvare in blocco tutte le tabelle di una pagina web","text":"<p>Alle volte in una pagina HTML ci sono pi\u00f9 tabelle. Ad esempio quelle della pagina sul rapporto \"Ecosistema urbano di Legambiente e Ambiente Italia\".</p> <p></p> <p>Per scaricarle e salvarle tutte, questi i passi da seguire:</p> <ul> <li>aprire la pagina, specificando con <code>--save-filetype=csv</code> quale sar\u00e0 il formato in cui si vorranno salvare le tabelle;</li> </ul> <pre><code>vd https://lab24.ilsole24ore.com/ecosistema-urbano/indexT.php --save-filetype=csv\n</code></pre> <ul> <li>una volta aperto VisiData, rimanere nelle prima colonna e selezionare tutto con <code>gs</code>;</li> <li>la prima colonna contiene il nome delle tabelle. In questo caso sono una ventina e hanno tutte lo stesso nome. Per poterle salvare, senza sovrascriversi a vicenda (hanno tutte lo stesso nome), rinominarle con <code>gi</code> che creer\u00e0 in quella colonna - per ogni cella - un progressivo numerico a partire da <code>1</code>;</li> </ul> <p></p> <ul> <li>lanciare il comando per salvare tutte le tabelle (che sono gi\u00e0 selezionate), ovvero <code>g+CTRL+s</code>;</li> <li>indicare come output la cartella corrente <code>./</code> (occhio quindi, verificare che non ci sia nulla di importante dentro) e dare INVIO;</li> <li>verr\u00e0 chiesto il permesso di sovrascrivere; rispondere con <code>yes</code>.</li> </ul> <p>Nella cartella di lavoro saranno disponibili tutte le tabelle, in formato <code>CSV</code>.</p> <p>Nota bene: la ricetta \u00e8 stata stimolata da questa domanda.</p>"},{"location":"ricette/#aprire-una-determinata-tabella-di-una-pagina-web","title":"Aprire una determinata tabella di una pagina web","text":"<p>Quando si apre una pagina web con VisiData, ci viene restituito un elenco delle tabelle presenti nella pagina.</p> <p>Se si lancia ad esempio <code>vd \"https://SitoEsempio.it/pagina\"</code>, si avr\u00e0 un output come quello di sotto, in cui nella prima colonna ci sono le tabelle denominate <code>table_0</code> e <code>links</code>. L'utente potr\u00e0 selezionare la prima riga e premere <code>INVIO</code> per aprire la tabella <code>table_0</code>.</p> <p></p> <p>Se si vuole aprire direttamente la tabella <code>table_0</code>, senza passare da questo elenco, si pu\u00f2 fare aggiungendo <code>+:nome_tabella::</code> al comando. In questo esempio quindi sar\u00e0:</p> <pre><code>vd \"https://SitoEsempio.it/pagina\" +:table_0::\n</code></pre>"},{"location":"ricette/#salvare-un-flusso-di-lavoro","title":"Salvare un flusso di lavoro","text":""},{"location":"ricette/#introduzione","title":"Introduzione","text":"<p>In VisiData \u00e8 possibile salvare il log delle operazione fatte e riutilizzarlo per applicarle nuovamente al file di input.</p> <p>Se ad esempio a partire da questo file <code>CSV</code> (sotto l'anteprima) si volessero cancellare tutte le righe che contengono il solo carattere <code>a</code> nella prima colonna e infine salvare l'output, la procedura \u00e8:</p> <ul> <li><code>vd input.csv</code>;</li> <li>posizionarsi nella prima colonna e pigiare | per attivare la selezione tramite espressione regolare, scrivere <code>^a$</code> e premere INVIO. Verr\u00e0 fatta la selezione descritta;</li> <li>pigiare in sequenza g e d per cancellare le righe selezionate;</li> <li>poi CTRL+s;</li> <li>e infine scegliere un nome di output (ad esempio <code>output.csv</code>) e pigiare INVIO per salvare il file.</li> </ul> field1 field2 a 0 b 3 a 4 c 5 <p>Per salvare la procedura di sopra in un file di log, bisogner\u00e0 premere CTRL+d, scegliere un nome per salvare il file (ad esempio <code>cancella_le_a.vd</code>) e pigiare INVIO.</p> <p>Il file di log salvato avr\u00e0 un contenuto come quello sottostante (\u00e8 un file <code>TSV</code>), in cui sono \"mappate\" tutte le operazioni fatte:</p> sheet col row longname input keystrokes comment global null_value set-option open-file input.csv o input field1 select-col-regex ^a$ input delete-selected gd delete (cut) selected rows and move them to clipboard input save-sheet output.csv ^S save current sheet to filename in format determined by extension (default .tsv) <p>Per riapplicare la stessa procedura al file, senza interagire con lo schermo, il comando da lanciare \u00e8:</p> <pre><code>vd -b -p cancella_le_a.vd\n</code></pre> <ul> <li><code>-b</code> per eseguire VisiData senza attivarne l'interfaccia;</li> <li><code>-p</code> per replicare un file di log.</li> </ul> <p>Se questo comando si lancia dopo avere gi\u00e0 creato il file di output, si avr\u00e0 un messaggio di errore, che avvisa che il file esiste gi\u00e0 e non pu\u00f2 essere sovrascritto. Per fare in modo che venga sovrascritto bisogner\u00e0 aggiungere l'opzione <code>-y</code>:</p> <pre><code>vd -y -b -p cancella_le_a.vd\n</code></pre> <p>A schermo verr\u00e0 restituito l'elenco delle operazione svolte:</p> <pre><code>opening cancella_le_a.vd as vd\n\"input.csv\"\nopening input.csv as csv\nselect rows matching regex in current column\n\"^a$\"\nsearch wrapped\n2 matches for /^a$/\nselected 2 rows\ndelete (cut) selected rows and move them to clipboard\ncopied 2 rows to clipboard\ndeleted 2 rows\nsave current sheet to filename in format determined by extension (default .tsv)\n\"output.csv\"\nsaving 1 sheets to output.csv as csv\nreplay complete\n</code></pre>"},{"location":"ricette/#applicare-lo-stesso-flusso-a-un-file-diverso-ma-omologo","title":"Applicare lo stesso flusso a un file diverso, ma omologo","text":"<p>Spesso si ha la necessit\u00e0 di applicare una stessa procedura ad altri file, con la stessa struttura, ma con contenuti differenti. Per utilizzare il file di log creato con un file diverso da <code>input.csv</code>, bisogner\u00e0 modificare il file di log (si modifica con qualsiasi editor di testo):</p> <ul> <li>rimuovere la riga con il riferimento a <code>input.csv</code></li> <li>rimuovere il riferimento al nome del foglio (qui \u00e8 <code>input</code>, come il nome del file).</li> </ul> <p>Diventer\u00e0 quindi:</p> sheet col row longname input keystrokes comment global null_value set-option field1 select-col-regex ^a$ delete-selected gd delete (cut) selected rows and move them to clipboard save-sheet output.csv ^S save current sheet to filename in format determined by extension (default .tsv) <p>Fatto questo, il comando da usare con un nuovo file denominato ad esempio <code>input_nuovo.csv</code> sar\u00e0:</p> <pre><code>vd -y -b -p cancella_le_a.vd input_nuovo.csv\n</code></pre> <p>In output verr\u00e0 creato il file <code>output.csv</code>.</p> <p>Se si vuole creare un file di output con nome diverso, si deve cancellare dal file di log la riga in cui si fa riferimento a <code>output.csv</code> e lanciare il comando:</p> <pre><code>vd -y -b -p cancella_le_a.vd input_nuovo.csv -o output_nuovo.csv\n</code></pre>"},{"location":"ricette/#nota-sul-file-di-log","title":"Nota sul file di log","text":"<p>Si tratta di un TSV, quindi \u00e8 possibile leggerlo e modificarlo proprio con VisiData:</p> <p></p>"},{"location":"ricette/#fare-il-redirect-delloutput-verso-lo-stdout","title":"Fare il redirect dell'output verso lo stdout","text":"<p>Il comando</p> <pre><code>vd input.csv -b --save-filetype json -o - | jq .\n</code></pre> <p>invier\u00e0 ad esempio a <code>jq</code> un output <code>JSON</code> a partire dal CSV di input:</p> <ul> <li><code>-b</code> per eseguire VisiData senza attivarne l'interfaccia;</li> <li><code>--save-filetype json</code> per fissare il formato di output in <code>JSON</code>;</li> <li><code>-o -</code> per fare il redirect dell'output verso lo <code>stdout</code> (rappresentato da <code>-</code>).</li> </ul> <p>Se ad esempio si vuole passare l'output a grep:</p> <pre><code>vd input.csv -b --save-filetype tsv -o - 2&gt; /dev/null | grep 'a'\n</code></pre> <p><code>2&gt; /dev/null</code> per non avere <code>stderr</code> a schermo.</p>"},{"location":"ricette/#creare-un-grafico-di-dispersione-scatter-plot","title":"Creare un grafico di dispersione (scatter plot)","text":"<p>VisiData pu\u00f2 stampare a schermo anche dei grafici XY. Non \u00e8 un suo punto di forza, ma pu\u00f2 essere utile per avere una prima e grezza visualizzazione spaziale dell'insieme dei dati.</p> <p>Il requisito per crearne uno, \u00e8 avere due colonne numeriche, da usare come coppia di coordinate. Qualcosa come quella di sotto.</p> fid X Y 1 12.29 43.76 2 12.16 43.64 3 12.15 43.65 4 12.16 43.63 ... ... ... <p>Per generare il grafico baster\u00e0 seguire i seguenti passi:</p> <ul> <li>impostare come numeriche (numeri decimali digitando <code>%</code> sulla colonna, o <code>#</code> per numeri interi) le due colonne con le coordinate;</li> <li>impostare come colonna chiave la colonna con le ascisse, selezionandola e digitando <code>!</code>;</li> <li>selezionare la colonna con le ordinate e digitare <code>.</code>.</li> </ul> <p>In output si avr\u00e0 qualcosa come quella di sotto</p> <p></p>"},{"location":"ricette/#applicare-il-natural-sorting-ai-contenuti-di-una-cella","title":"Applicare il natural sorting ai contenuti di una cella","text":"<p>Il natural sorting \u00e8 un ordinamento di stringhe pi\u00f9 \"umano\".Se una cella contiene ad esempio i valori <code>3,1,10,1/A,100,SNC</code>, l'ordinamento naturale potrebbe essere <code>1,1/A,3,10,100,SNC</code>. Di contro un'applicazione - con una lista fatta sia di stringhe che di numeri - produce di solito questo ordinamento <code>1,1/A,10,100,3,SNC</code>.</p> <p>Il natural sorting \u00e8 un concetto noto da tempo in letteratura (un esempio per tutti), ma spesso non \u00e8 disponibile nativamente e bisogna implementarlo importando librerie o sfruttando funzioni dedicate.</p> <p>In VisiData \u00e8 applicabile ad esempio aggiungendo per prima cosa una funzione personalizzata al file di configurazione:</p> <pre><code>import re\n\n_nsre = re.compile('([0-9]+)')\ndef natural_sort_key(s):\n    return [int(text) if text.isdigit() else text.lower()\n            for text in re.split(_nsre, s)]\n\ndef natsort(value, delimiter=','):\n   list1 = value.split(delimiter)\n   list1.sort(key=natural_sort_key)\n   joined_string = delimiter.join(list1)\n   return joined_string\n</code></pre> <p>Immaginiamo di volere applicare il natural sorting a un file come questo (un <code>CSV</code>):</p> <pre><code>nomeCampo\n\"3,1,10,1/A,100,SNC\"\n</code></pre> <p>Questi saranno i passi da fare:</p> <ul> <li>aprire il file <code>vd input.csv</code>;</li> <li>fare click su =, per creare una nuova colonna basata su un'espressione Python;</li> <li>scrivere <code>natsort(nomeCampo)</code> e dare INVIO, per applicare la funzione soprastante, al campo <code>nomeCampo</code>.</li> </ul> <p>In output si avr\u00e0:</p> <pre><code>nomeCampo,natsort(nomeCampo)\n\"3,1,10,1/A,100,SNC\",\"1,1/A,3,10,100,SNC\"\n</code></pre> <p>Nel file di configurazione di esempio inserito in questa guida, \u00e8 stata aggiunta la funzione <code>natsort</code>. Se nella cella il separatore non \u00e8 la <code>,</code>, si pu\u00f2 personalizzare la funzione in questo modo: <code>natsort(nomeCampo, delimiter='/')</code> (in questo caso si \u00e8 impostato come delimitatore il carattere <code>/</code>).</p> <p>Grazie a Salvatore Fiandaca, per averci stimolato ad approfondire la cosa, con questa domanda su StackExchange.</p>"},{"location":"ricette/#cambiare-il-separatore-di-campo-di-un-csv","title":"Cambiare il separatore di campo di un CSV","text":"<p>Se si vuole cambiare il separatore di campo di un CSV, questi i passi da seguire:</p> <ul> <li>aprire il file;</li> <li>fare click su <code>barra spaziatrice</code>;</li> <li>digitare <code>options-sheet</code> e premere <code>INVIO</code>, per visualizzare le opzioni del foglio;</li> <li>cercare l'opzione <code>csv_delimiter</code> e impostare come <code>sheet_value</code> il separatore desiderato (la cella si modifica con il tasto <code>e</code>);</li> <li>chiudere l'<code>options-sheet</code> con il tasto <code>q</code>;</li> <li>premere <code>CTRL</code> + <code>s</code> e salvare il file in formato <code>CSV</code>.</li> </ul> <p></p> <p>Nota</p> <p>Ricetta creata grazie a questa richiesta di Salvatore Fiandaca.</p>"},{"location":"ricette/#selezionare-righe-tramite-una-python-expression","title":"Selezionare righe tramite una python expression","text":"<p>Si pu\u00f2 selezionare un sottoinsieme di righe, in base a una condizione, utilizzando una python expression.</p> <p>Ad esempio voglio selezionare tutte le righe in cui il campo <code>basename</code> rispetta un'espressione regolare basata su un altro campo, il campo <code>var</code>. L'espressione prevede di cercare <code>_V</code> seguito da un numero, seguito da <code>_</code> e dal valore del campo <code>var</code>, e infine da un punto e da qualsiasi cosa.</p> <p>Ecco coma farlo:</p> <ul> <li>sposarsi sulla colonna <code>basename</code>;</li> <li>premere <code>z|</code> per attivare la selezione tramite python expression;</li> <li>scrivere l'espressione <code>re.search(rf\"_V\\d+_{var}\\..+\", basename)</code> e premere INVIO.</li> </ul> <p>Con <code>rf</code> si indica che si sta usando una raw string e che ad esempio il carattere <code>\\</code> non deve essere interpretato come un carattere di escape, ma come parte della stringa.</p> <p>Qui, viene usato il modulo <code>re</code> per le espressioni regolari: per usarlo bisogna importarlo nel file di configurazione, ad esempio con la riga <code>import re</code>.</p> <p>Nota</p> <p>Anche nell'esempio di filtro per data, si applica una python expression.</p>"},{"location":"sostieni/","title":"Sostieni","text":""},{"location":"sostieni/#sostenere-lo-sviluppo-di-visidata","title":"Sostenere lo sviluppo di VisiData","text":"<p>Se VisiData ti piace e lo usi, puoi supportarne lo sviluppo con una donazione.  Si fa da qui https://www.patreon.com/saulpw.</p> <p>Sostieni VisiData</p>"},{"location":"sostieni/#sostenere-lassociazione-ondata","title":"Sostenere l'associazione onData","text":"<p>Se questa guida ti \u00e8 stata utile, puoi sostenere l'associazione onData facendo una donazione, \ud83d\ude4f grazie!</p> <p>Sostieni onData </p>"}]}